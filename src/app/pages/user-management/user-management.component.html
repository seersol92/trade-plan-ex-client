<ng-template #userTemplate let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title"> {{ !isEditUser ? 'Register New User' : 'Edit User' }}</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <fieldset>
      <div class="form-group">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>First Name*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <input type="text" class="form-control" name="firstname" [(ngModel)]="user.firstname" placeholder="First Name">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>Last Name*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <input type="text" class="form-control" name="lastname" [(ngModel)]="user.lastname" placeholder="Last Name">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>User Name*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <input type="text" class="form-control" name="username" [(ngModel)]="user.username" placeholder="User Name">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>Email*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <input type="email" class="form-control" name="email" [(ngModel)]="user.email" placeholder="User Email">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>User Status*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <div class="col-6">
              <input type="radio" class="" name="is_admin" [(ngModel)]="user.is_admin" [value]="true"> Admin
            </div>
            <div class="col-6">
              <input type="radio" class="" name="is_admin" [(ngModel)]="user.is_admin" [value]="false"> User
            </div>
          </div>
        </div>
      </div>
      <div class="form-group" *ngIf="!isEditUser">
        <div class="row">
          <div class="col-md-3 col-xs-12">
            <label for="title">
              <strong>Password*</strong>
            </label>
          </div>
          <div class="col-md-9 col-xs-12">
            <input type="password" class="form-control" name="password" [(ngModel)]="user.password" placeholder="Password">
          </div>
        </div>
      </div>
    </fieldset>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary btn-raised" (click)="c('Close click')">Close</button>
    <button type="button" class="btn btn-success btn-raised" *ngIf='!isEditUser; else updateBtn' (click)='submitUser()' [disabled]='isFormProcessing'>
      Save
    </button>
    <ng-template #updateBtn>
      <button type="button" class="btn btn-success btn-raised" (click)='updateUser()' [disabled]='isFormProcessing'>
        Update
      </button>
    </ng-template>
  </div>
</ng-template>
<ng-template #userNotFound>
  <div class="alert alert-icon-left alert-arrow-left alert-info mb-2" role="alert">
    <h4>Info!</h4>
    <p>No, Registered Users found.
  </div>
</ng-template>
<div class="content-header row">
  <div class="content-header-left col-md-6 col-12 mb-1">
    <h3 class="content-header-title">{{ title }}</h3>
  </div>
  <div class="content-header-right breadcrumbs-right breadcrumbs-top col-md-6 col-12">
    <div class="breadcrumb-wrapper col-12">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active">
          <a>{{ title }}</a>
        </li>
      </ol>
    </div>
  </div>
</div>
<div class="row mb-1 justify-content-end">
  <div class="col-lg-3  col-xs-12">
    <a class="btn btn-outline-primary  btn-block" placement="bottom" ngbTooltip="Register new user?" (click)='openModal(null, false, userTemplate)'>Register A User</a>
  </div>
</div>
<div class="content-body">
  <section class="row">
    <div class="col-sm-12">
      <!-- Kick start -->
      <div id="kick-start" class="card" *ngIf="userList?.length !== 0 ; else  userNotFound">
        <div class="card-header">

        </div>
        <div class="card-content collapse show">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table">
                <caption>Users List</caption>
                <thead>
                  <tr>
                    <th>#</th>
                    <th> First Name</th>
                    <th> Last Name</th>
                    <th> User Name</th>
                    <th> Email</th>
                    <th> Admin</th>
                    <th> Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let user of userList; index as i">
                    <td>{{i+1}}</td>
                    <td>{{user.firstname}}</td>
                    <td>{{user.lastname}}</td>
                    <td>{{user.username}}</td>
                    <td>{{user.email}}</td>
                    <td>
                      <div class="badge" [ngClass]="{
                        'badge-success': user.is_admin,
                        'badge-info': !user.is_admin }">
                        <strong>
                          {{ user.is_admin ? 'YES' : 'NO' }}
                        </strong>
                      </div>
                    </td>
                    <td>
                      <a href="javascript:void(0)" (click)="openModal(i, true, userTemplate)" placement="bottom" ngbTooltip="Edit this user?">
                        <i class="ft-edit"></i>
                      </a>
                      &nbsp;&nbsp;
                      <a href="javascript:void(0)" (click)="onDeleteUser(i)" class="danger" placement="bottom" ngbTooltip="Delete this user?">
                        <i class="ft-trash-2"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
